$(document).ready(function(){function c(a){var c=a.attr("data-prototype").replace(/__name__label__/g,"nÂ°"+(b+1)).replace(/__name__/g,b),e=$(c);d(e),a.append(e),b++}function d(a){var b=$('<a href="#" class="btn btn-danger">'+deleteButton+'</a>');a.append(b),b.click(function(b){return a.remove(),b.preventDefault(),!1})}function f(a,b){var c=$("#payment-form");if(b.error)c.find(".payment-errors").text(b.error.message),c.find(".submit").prop("disabled",!1);else{var d=b.id;c.append($('<input type="hidden" name="stripeToken">').val(d)),c.get(0).submit()}}var a=$("div#reservation_visitors"),b=a.find(":input").length;$("#add_visitor").click(function(b){return c(a),b.preventDefault(),!1}),0==b?c(a):a.children("div").each(function(){d($(this))}),$(".js-datepicker").datepicker({format:"dd/mm/yyyy",startDate:"0",daysOfWeekDisabled:"2",beforeShowDay:function(a){if(25==a.getDate()&&11==a.getMonth()||1==a.getDate()&&4==a.getMonth()||1==a.getDate()&&10==a.getMonth())return!1}}),$("#reservation_date").change(function(){var a=new Date,b=a.getHours(),c=a.toLocaleDateString(),d=$("#reservation_date").val();d==c&&b>=14?($("#reservation_dayTime").prop("checked",!0),$("#reservation_dayTime").prop("required",!0)):($("#reservation_dayTime").prop("checked",!1),$("#reservation_dayTime").prop("required",!1))});var e=$("#payment-form");$(".cc-number").payment("formatCardNumber"),$(".cc-exp").payment("formatCardExpiry"),$(".cc-cvc").payment("formatCardCVC"),e.submit(function(a){return a.preventDefault(),$("#email").val()!==$("#confirm").val()?($(".payment-errors").empty().append("<p>Les emails ne correspondent pas</p>"),!1):(e.find(".submit").prop("disabled",!0),Stripe.card.createToken(e,f),!1)})});